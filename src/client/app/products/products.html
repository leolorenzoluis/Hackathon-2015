<section class="mainbar">
	<section class="matter">
		<div class="container">
			<div class="row-fluid">
				<div class="col-md-12">
					<div class="widget wgreen">
						<div ht-widget-header title="Product Search" allow-collapse="true"></div>
						<div class="widget-content text-left text-info">
							<div class="form-group">
								<input class="form-control" ng-model="vm.filterOptions.filterText" placeholder="Filter a product..." />
							</div>
							<div class="row">
								<!-- Wrapper around the non-responsive ng-grid -->
								<div class="col-sm-12 gridStyle" ng-grid="vm.gridOptions" /></div>
						</div>
						<div class="widget-foot">
							<div class="clearfix"></div>
						</div>
		<div ng-app="myApp" ng-controller="productController">
			<!--url = {{url}}<br/>
			id = {{result.id}}<br/>-->
		<!--Product Name: <input ng-model="productName" ng-keyup="doSearch($event);"><br/>-->
		Search: <input ng-model="query">

		<table>
			<tr>
				<th>Key</th>
				<th>Value</th>
			</tr>
		  <tr ng-repeat="key in result.openfda | filter:query">
		    <td>{{ key[0] }}</td>
		    <td>{{ result[key][0] }}</td>
		  </tr>
		</table>	
	</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<script>
		var myApp = angular.module('myApp', [])
		.controller('productController',productController);
		productController.$inject = ['$scope','$http'];
		
		function productController($scope, $http){
			var pieces = document.location.pathname.split("/");
			$scope.url = "/data/product/" + pieces[pieces.length - 1];
			$http.get($scope.url).success(function (response) {
				$scope.result = response.results[0];
			});
		}		
	</script>
</section>
